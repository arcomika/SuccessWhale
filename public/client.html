<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=0"/>
  <title>SuccessWhale</title>
  <link rel="stylesheet" href="css/normalize.css"/>
  <link rel="stylesheet" href="css/style.css"/>
  <link rel="stylesheet" href="css/jquery.gpopover.css"/>
  <link rel="stylesheet" href="js/libs/fancybox/jquery.fancybox.css?v=2.1.5" />
  <link rel="icon" href="img/favicon.ico" type="image/x-icon"/>
  <link rel="shortcut icon" href="img/favicon.ico" type="image/x-icon"/>
</head>
<body>
  <div id="successbox"></div>
  <div id="errorbox"></div>
  <div id="header">
    <div id="topmenu">
      <a id="logoutbutton" href="#"><img src="img/ui/logout.png" title="Logout" alt="Logout" /></a>
    </div>
    <form id="postform" method="post">
      <input id="token" name="token" type="hidden" data-bind="value: token"/>
      <input id="postToAccounts" name="accounts" type="hidden" data-bind="value: postToAccountsString()"/>
      <textarea id="postentry" name="text" rows="1"></textarea>
      <span id="postbutton">Post</span>
      <span id="attachbutton" data-popover="attachmentdialog"><span class="icon"><img src="img/ui/attach.png" title="Attach Photo" alt="Attach Photo" /></span></span>
      <div id="attachmentdialog" class="gpopover">
        <p>Attach file:</p>
          <input type="file" name="file" id="filetoupload"/>
          <input type="button" id="fileclearbutton" value="Clear"/>
      </div>
      <span id="postbuttondropdown" data-popover="accountselector"><span class="icon"><img src="img/ui/downarrow.png" title="Select accounts to post to" alt="Select accounts to post to" /></span>
      <div id="accountselector" class="gpopover">
        <p>Post to:</p>
        <ul data-bind="foreach: postToAccounts">
          <li>
            <input type="checkbox" data-bind="name: service + '/' + uid, checked: enabled"/>
            <img data-bind="attr: { src: '/img/icons/'+service+'.png' }"/>&nbsp;
            <span data-bind="text: username"></span>
          </li>
        </ul>
      </div>
    </form>
  </div>
  <div id="columns" data-bind="foreach: columns, style: { width: (columns().length/colsPerScreen()*100) + '%'}">
    <div data-bind="name: fullpath, style: { width: 100/$parent.columns().length-1 + '%' }" class="column">
      <h4 class="columnheading" data-bind="text: title"></h4>
      <!-- ko foreach: items -->
        <div class="item">
          <div class="item-fromuser" data-bind="css: 'item-fromuser-'+service">
            <a data-bind="attr: { href: makeFromUserLink(content, service) }" target="_blank"><img class="item-fromuseravatar" data-bind="attr:{src: content.fromuseravatar}" /></a>
            <div class="item-fromusername" data-bind="text: makeFromUserText(content, service)"></div>
            <div class="item-time" data-bind="text: moment(content.time).fromNow()"></div>
            <div class="actionsdropdown" data-bind="attr:{ 'data-popover': 'actions-' + hashCode(service + content.id) }">
              <img src="img/ui/downarrow2.png" title="Action menu" alt="Action menu" />
            </div>
            <div class="gpopover actionsgpopover" data-bind="attr:{ id: 'actions-' + hashCode(service + content.id) }">
              <ul data-bind="foreach: content.actions">
                <!-- ko if: (name == 'reply') -->
                <li>
                  <span class="actionbutton" onclick="">Reply</span>
                </li>
                <!-- /ko -->
                <!-- ko if: (name == 'retweet') -->
                <li>
                  <span class="actionbutton" data-bind="click: function(action) { performAction(action.params);} ">Retweet</span>
                </li>
                <!-- /ko -->
                <!-- ko if: (name == 'favorite') -->
                <li>
                  <span class="actionbutton" onclick="click: function(action) { performAction(action.params);} ">Favorite</span>
                </li>
                <!-- /ko -->
                <!-- ko if: (name == 'like') -->
                <li>
                  <span class="actionbutton" onclick="click: function(action) { performAction(action.params);} ">Like</span>
                </li>
                <!-- /ko -->
                <!-- ko if: (name == 'conversation') -->
                <li>
                  <span class="actionbutton" onclick="">Conversation</span>
                </li>
                <!-- /ko -->
                <!-- ko if: (name == 'delete') -->
                <li>
                  <span class="actionbutton" onclick="">Delete</span>
                </li>
                <!-- /ko -->
              </ul>
            </div>
            <div class="item-metadata" data-bind="html: makeMetadataText(content)"></div>
            <div class="clear"></div>
          </div>
          <div class="item-text" data-bind="html: makeItemTextHTML(content)"></div>
        </div>
      <!-- /ko -->
    </div>
  </div>
  <div class="modal"></div>
    
  <script src="js/libs/cookies.js"></script>
  <script src="js/libs/xdr.js"></script>
  <script src="js/libs/jquery-1.9.1.js"></script>
  <script src="js/libs/knockout-3.0.0.js"></script>
  <script src="js/libs/moment.min.js"></script>
  <script src="js/libs/twitter-entities.js"></script>
  <script src="js/libs/jquery.gpopover.js"></script>
  <script src="js/libs/jquery.autosize.min.js"></script>
  <script src="js/libs/jquery.form.min.js"></script>
  <script src="js/libs/fancybox/jquery.fancybox.pack.js?v=2.1.5"></script>
  <script src="js/successwhale.js"></script>

</body>
</html>
